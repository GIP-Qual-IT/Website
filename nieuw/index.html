<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <section class="test">
 
        <h1 class="kop-title">Staff</h1>
    <div id="trainers" class="staff">
        </div>
 
 
 
        <h1 class="kop-title">Spelers</h1>
    <div id="spelers" class="spelers">
        
    </div>
    </section>
    <script>
            // Function to get parameter value from URL
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, '\\$&');
        const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
        const results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }
 
    const clubId = getParameterByName('clubid');
    // Use the clubId in your JavaScript code
    fetch('https://datalake-prod2018.rbfa.be/graphql?operationName=GetTeamMembers&variables=%7B%22teamId%22%3A%22283190%22%2C%22language%22%3A%22nl%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%22cbbaa32e4580c9385409c85464d2578c88f1c051f6e3c55a2e5a47f11dce9e64%22%7D%7D')
            .then(response => response.json())
            .then(data => {
                    const staf = data.data.teamMembers.staff;
                    const trainers = document.getElementById('trainers');
 
                    // Check if 'players' is an array and not empty
                    if (Array.isArray(staf) && staf.length > 0) {
                        staf.forEach(staff => {
                            // Create list item for each player and append to the list
                            const listItem = document.createElement('div');
                            listItem.classList.add('kaart');
                            listItem.innerHTML = `
                            <div>
                            <img class="speler-img" src="blanco-profiel.webp" alt="">
                            </div>
                            <div class="wit-regel">
            
                            </div>
                            <div class="speler-tekst">
                                <h2 class="speler-naam">${staff.firstName} ${staff.lastName}</h2>
                                <p>${staff.function}</p>
                            </div>
                            `;
                            trainers.appendChild(listItem);
                        });
                    } else {
                        console.error('No players found in the JSON response.');
                    }
           
                const players = data.data.teamMembers.players;
                const playersList = document.getElementById('spelers');
 
                    players.forEach(player => {
                        // Create list item for each player and append to the list
                        const listItem = document.createElement('div');
                            listItem.classList.add('kaart');
                            listItem.innerHTML = `
                            <div>
                            <img class="speler-img" src="blanco-profiel.webp" alt="">
                            </div>
                            <div class="wit-regel">
 
                            </div>
                            <div class="speler-tekst">
                            <h2 class="speler-naam">${player.firstName} ${player.lastName}</h2>
                            <p>Matches: ${player.statistics.numberOfMatches}</p>
                            <p>Goals: ${player.statistics.numberOfGoals}</p>
                            <p>Positie: IDFK</p>
                            </div>
                            `;
                        playersList.appendChild(listItem);
                    });
        })
        .catch(error => console.error('Error fetching data:', error));
    </script>
</body>
</html>