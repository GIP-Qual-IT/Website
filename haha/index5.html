<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speler Naam Generator</title>
</head>
<body>

    <h1>Speler Generator</h1>
    <label for="TeamIdSelect">Selecteer Team:</label>
    <select id="TeamIdSelect"></select>
    <button onclick="fillPlayerIdSelect()">Kies Team</button><br>

    <label for="playerIdSelect">Selecteer Speler:</label>
    <select id="playerIdSelect"></select>

    <button onclick="generatePlayerName()">Genereer Naam</button><br>

    <p id="playerNameInput"></p>
    <p id="playerDetailsInput"></p>

    <script>
        function fillTeamIdSelect() {
            fetch('https://datalake-prod2018.rbfa.be/graphql?operationName=getClubTeams&variables=%7B%22clubId%22%3A%222905%22%2C%22language%22%3A%22nl%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%22d44e19259679780fe6932644072463997cfe60b66c223d8ba1f53430b0671728%22%7D%7D')
                .then(response => response.json())
                .then(data => {
                    var teams = data.data.clubTeams;
                    var selectElement2 = document.getElementById("TeamIdSelect");

                    teams.forEach(team => {
                        if (team.id !== "283154") {
                            var option2 = document.createElement("option");
                            option2.value = team.id;
                            option2.text = team.name;
                            selectElement2.add(option2);
                        }
                    });
                });
        }

        function fillPlayerIdSelect() {
            var selectElement = document.getElementById("playerIdSelect");
            selectElement.innerHTML = "";

            var teamId = document.getElementById("TeamIdSelect").value;
            fetch('https://datalake-prod2018.rbfa.be/graphql?operationName=GetTeamMembers&variables=%7B%22teamId%22%3A%22'+teamId+'%22%2C%22language%22%3A%22nl%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%22cbbaa32e4580c9385409c85464d2578c88f1c051f6e3c55a2e5a47f11dce9e64%22%7D%7D')
                .then(response => response.json())
                .then(data => {
                    var players = data.data.teamMembers.players;

                    players.forEach(player => {
                        var option = document.createElement("option");
                        option.value = player.id;
                        option.text = player.firstName + " " + player.lastName;
                        selectElement.add(option);
                    });
                });
        }

        function generatePlayerName() {
            var playerId = document.getElementById("playerIdSelect").value;
            var teamId = document.getElementById("TeamIdSelect").value;
            fetch('https://datalake-prod2018.rbfa.be/graphql?operationName=GetTeamMembers&variables=%7B%22teamId%22%3A%22'+teamId+'%22%2C%22language%22%3A%22nl%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%22cbbaa32e4580c9385409c85464d2578c88f1c051f6e3c55a2e5a47f11dce9e64%22%7D%7D')
                .then(response => response.json())
                .then(data => {
                    var players = data.data.teamMembers.players;
                    var player = players.find(p => p.id === playerId);

                    if (player) {
                        var playerNameInput = document.getElementById("playerNameInput");
                        var playerDetailsInput = document.getElementById("playerDetailsInput");
                        playerNameInput.textContent = "Speler: " + player.firstName + " " + player.lastName;
                        playerDetailsInput.textContent = "Matches: " + player.statistics.numberOfMatches + ", Goals: " + player.statistics.numberOfGoals;
                    } else {
                        var playerNameInput = document.getElementById("playerNameInput");
                        var playerDetailsInput = document.getElementById("playerDetailsInput");
                        playerNameInput.textContent = "";
                        playerDetailsInput.textContent = "";
                    }
                });
        }

        fillTeamIdSelect();
    </script>

</body>
</html>
