<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="ss.css">
    <link rel="stylesheet" href="hamburger.css">
    <link rel="stylesheet" href="animatie.css">
    <link rel="stylesheet" href="responsive.css">
    <title>Document</title>
    <script src="https://kit.fontawesome.com/86e8901cdc.js" crossorigin="anonymous"></script>
</head>
 
<nav class="navbar">
    <div class="logo">
        <img src="afbeeldingen/neerwinden.png" alt="Logo">
    </div>
    <ul id="navlinks" class="nav-links">
        <li><a class="active" href="index.html">Home</a></li>
        <li><a href="Bestuur.html">Bestuur</a></li>
        <li><a href="spelers.html">Spelers</a></li>
        <li><a href="Events.html">Events</a></li>
        <li><a href="over.html">Over</a></li>
        <li><a class="Contact" href="Contact.html">Contact</a></li>
    </ul>
    <img class="menu-logo" src="https://imgur.com/1iPwhVv.jpg" alt="menu-icon" onclick="menutoggle()">
</nav>
 
<div class="terug">
<a class="back" href="Spelers.html">
<i class="fa-solid fa-circle-arrow-left"></i>
<p>terug</p></a>
</div>
 
<main class="ploeg-leden">
    <h1 class="staff-title">Onze Trainers</h1>
    <section id="trainers" class="trainer">
 
    </section>
 
    <section class="ploeg-leden">
        <h3 class="staff-title">Onze spelers</h3>
        <section id="spelers" class="trainer">
 
        </section>
    </section>
    <section class="uitslagen">
        <div class="uitslag-datum">
            <p>uitslagen</p>
            <a href="">zie meer</a>
        </div>
 
        <div class="uitslag">
 
    <!-- Uitslag 1 -->
            <div class="uitslag1">
                <div class="datumM">
                    <p id="datum"></p>
                </div>
                <div class="extra">
                    <div class="uitslag-container">
                        <p id="uur" class="match-uur"></p>
                    </div>
                    <div class="ploegen">
                        <div class="club-info">
                            <img id="fotoThuis" src="" alt="" class="club-schild">
                            <p id="titelThuis" class="club-naam">Neerwinden</p>
                        </div>
                        <div class="stand">
                            <p id="outcome"></p>
                        </div>
                        <div class="club-info">
                            <img id="fotoUit" src="" alt="" class="club-schild">
                            <p id="titelUit" class="club-naam">Linden</p>
                        </div>
                    </div>
                </div>
            </div>
 
    <!-- Uitslag 2 -->
            <div class="uitslag1">
                <div class="datumM">
                    <p id="datum2"></p>
                </div>
                <div class="extra">
                    <div class="ploegen">
                        <div class="club-info">
                            <img id="fotoThuis2" src="" alt="" class="club-schild">
                            <p id="titelThuis2" class="club-naam"></p>
                        </div>
                        <div class="stand">
                            <p id="uur2"></p>
                        </div>
                        <div class="club-info">
                            <img id="fotoUit2" src="" alt="" class="club-schild">
                            <p id="titelUit2" class="club-naam"></p>
                        </div>
                    </div>
                </div>
            </div>
 
        </div>
 
    </section>
    <script>
    // Function to get parameter value from URL
    function getParameterByName(name, url) {
        if (!url) url = window.location.href;
        name = name.replace(/[\[\]]/g, '\\$&');
        const regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
        const results = regex.exec(url);
        if (!results) return null;
        if (!results[2]) return '';
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }
 
    // Get the clubid parameter value from the URL
    const clubId = getParameterByName('clubid');
 
    // Use the clubId in your JavaScript code
    fetch('https://datalake-prod2018.rbfa.be/graphql?operationName=GetTeamMembers&variables=%7B%22teamId%22%3A%22283190%22%2C%22language%22%3A%22nl%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%22cbbaa32e4580c9385409c85464d2578c88f1c051f6e3c55a2e5a47f11dce9e64%22%7D%7D')
            .then(response => response.json())
            .then(data => {
                    const staf = data.data.teamMembers.staff;
                    const trainers = document.getElementById('trainers');
 
                    // Check if 'players' is an array and not empty
                    if (Array.isArray(staf) && staf.length > 0) {
                        staf.forEach(staff => {
                            // Create list item for each player and append to the list
                            const listItem = document.createElement('div');
                            listItem.classList.add('spelerkaart');
                            const functies = [];
                            staff.function.forEach(func => {
                            functies.push(func);
                            });
                            listItem.innerHTML = `
                            <img class="speler-foto" src="afbeeldingen/blanco-profiel.webp" alt="afb-lid" class="picture">
                            <div class="speler-text">
                            <h2 class="trainer-naam">${staff.firstName} ${staff.lastName}</h2>
                            <p id="trainerfuncties" class="trainer-taak">${functies[0]}</p>
                            </div>
                            `;
                            trainers.appendChild(listItem);
                        });
                    } else {
                        console.error('No players found in the JSON response.');
                    }
           
                const players = data.data.teamMembers.players;
                const playersList = document.getElementById('spelers');
 
                    players.forEach(player => {
                        // Create list item for each player and append to the list
                        const listItem = document.createElement('div');
                            listItem.classList.add('spelerkaart');
                            listItem.innerHTML = `
                            <img class="speler-foto" src="afbeeldingen/blanco-profiel.webp" alt="afb-lid" class="picture">
                            <div class="speler-text">
                            <h2 class="trainer-naam">${player.firstName} ${player.lastName}</h2>
                            <p class="trainer-taak">Matches:${player.statistics.numberOfMatches}</p>
                            <p class="trainer-taak">Goals:${player.statistics.numberOfGoals}</p>
                            </div>
                            `;
                        playersList.appendChild(listItem);
                    });
        })
        .catch(error => console.error('Error fetching data:', error));
        
        fetch('https://datalake-prod2018.rbfa.be/graphql?operationName=GetLastPlayedMatch&variables=%7B%22teamId%22%3A%22283190%22%2C%22language%22%3A%22nl%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%2218edd7e1b5a15cdd3296c90232e453deb1a8eac80a98cfd10d1963830561fc8d%22%7D%7D')
            .then(response => response.json())
            .then(data => {
                 var store = data.data.lastPlayedMatch
                    document.getElementById('fotoThuis').src = store.homeTeam.logo;
                    document.getElementById('titelThuis').textContent = store.homeTeam.name;
                    document.getElementById('fotoUit').src = store.awayTeam.logo;
                    document.getElementById('titelUit').textContent = store.awayTeam.name;
                    document.getElementById('outcome').textContent = store.outcome.homeTeamGoals + " - " + store.outcome.awayTeamGoals;
                    var inputDate = store.startTime;
                    var dateObject = new Date(inputDate);
                    var day = ('0' + dateObject.getDate()).slice(-2);
                    var month = ('0' + (dateObject.getMonth() + 1)).slice(-2);
                    var months = [
                        "Invalid month number",
                        "Januari",
                        "Februari",
                        "Maart",
                        "April",
                        "Mei",
                        "Juni",
                        "Juli",
                        "Augustus",
                        "September",
                        "Oktober",
                        "November",
                        "December"
                    ];
                    var changedmonth = months[parseInt(month) - 1];
                    var year = dateObject.getFullYear();
                    var hours = ('0' + dateObject.getHours()).slice(-2);
                    var minutes = ('0' + dateObject.getMinutes()).slice(-2);
                    var uur = hours +':'+ minutes;
                    var formattedDate = day + '<br><span class="bold">' + changedmonth + '</span> ';
                    document.getElementById('uur').textContent = uur
                    document.getElementById('datum').innerHTML = formattedDate
            })


        fetch('https://datalake-prod2018.rbfa.be/graphql?operationName=GetUpcomingMatch&variables=%7B%22teamId%22%3A%22283190%22%2C%22language%22%3A%22nl%22%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%2282e90ddafc6823e8cc5c5d876073e0e01c261f6844ad8e8bab5b8fd0b17da5e1%22%7D%7D')
            .then(response => response.json())
            .then(data => {
                var store2 = data.data.upcomingMatch
                    document.getElementById('fotoThuis2').src = store2.homeTeam.logo;
                    document.getElementById('titelThuis2').textContent = store2.homeTeam.name;
                    document.getElementById('fotoUit2').src = store2.awayTeam.logo;
                    document.getElementById('titelUit2').textContent = store2.awayTeam.name;
                    var inputDate1 = store2.startTime;
                    var dateObject1 = new Date(inputDate1);
                    var day1 = ('0' + dateObject1.getDate()).slice(-2);
                    var month1 = ('0' + (dateObject1.getMonth() + 1)).slice(-2);
                    var months1 = [
                        "Invalid month number",
                        "Januari",
                        "Februari",
                        "Maart",
                        "April",
                        "Mei",
                        "Juni",
                        "Juli",
                        "Augustus",
                        "September",
                        "Oktober",
                        "November",
                        "December"
                    ];
                    var changedmonth1 = months1[parseInt(month1) - 1];
                    var year1 = dateObject1.getFullYear();
                    var hours1 = ('0' + dateObject1.getHours()).slice(-2);
                    var minutes1 = ('0' + dateObject1.getMinutes()).slice(-2);
                    var formattedDate1 = day1 + '<br><span class="bold">' + changedmonth1 + '</span> ';
                    var formattedDate2 = hours1 + ':' + minutes1;
                    document.getElementById('datum2').innerHTML = formattedDate1
                    document.getElementById('uur2').textContent = formattedDate2
            })
    </script>
</main>
</body>
</html>